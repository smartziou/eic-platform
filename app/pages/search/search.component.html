<div class="tm-header-placeholder uk-margin-remove-adjacent" style="height: 84px;"></div>
<div class="uk-background-norepeat uk-background-cover uk-background-fixed uk-section uk-padding-remove-bottom uk-flex uk-flex-middle"
     style="background-image: url('https://dl119.madgik.di.uoa.gr/templates/yootheme/cache/handsinair_3-f4940f92.png'); box-sizing: border-box; height: 150px;">
    <!--<div class="uk-position-cover"></div>-->
    <div class="uk-width-1-1">
        <div class="uk-position-relative">
            <div class="uk-container uk-margin-medium">
                <div class="search_box_bg uk-grid-large uk-flex-middle uk-grid uk-grid-stack" uk-grid="">
                    <div class="uk-width-1-1@m uk-first-column">
                        <div>
                            <div class="search_box_bg" style="text-align:center">
                                <form [formGroup]="searchForm" (ngSubmit)="this.onSubmit(searchForm.value)">
                                    <input aria-describedby="sizing-addon2" class="uk-input uk-width-1-2 ng-pristine ng-valid
                                    uk-comment uk-comment-meta ng-untouched" formControlName="query" name="keyword"
                                           placeholder="Search our service catalogue..." type="text">
                                    <button class=" uk-button uk-button-default" type="submit">Search</button>
                                </form>
                                <ul *ngIf="urlParameters && urlParameters.length>0" class="facets-selected cf uk-width-medium-9-10">
                                    <ng-template ngFor let-urlParameter [ngForOf]="urlParameters">
                                        <!--TODO remove when provider is removed from filters in the backend-->
                                        <ng-template [ngIf]="urlParameter.key!='from' && urlParameter.key!='provider'">
                                            <li *ngFor="let facet of urlParameter.values" class="search-tag">
                                                <span class="title">{{urlParameter.key}}:</span> {{facet}} <a (click)="this.deselectFacet(urlParameter.key, facet)" data-role="remove"></a>
                                            </li>
                                        </ng-template>
                                    </ng-template>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="tm-main" class="tm-main uk-section uk-section-default" uk-height-viewport="expand: true" style="box-sizing: border-box;">
    <div class="uk-container">

        <!-- TOP HELP CONTENT -->
        <help-content #topHelperContent [position]="'top'"
                      [ngClass]="topHelperContent.isPresent()?'uk-margin-medium-top uk-margin-medium-bottom':'clear-style'">
        </help-content>

        <div class="uk-grid" uk-grid="">


            <aside id="tm-sidebar" class="tm-sidebar uk-width-1-4@m">

                <div *ngIf="searchResults != null" class="uk-card uk-card-body uk-card-default sidemenu uk-panel-box-secondary refines">

                    <h3 class="uk-h3 uk-heading-bullet">Category</h3>

                    <ng-template ngFor let-facet [ngForOf]="searchResults.facets">
                        <ng-template [ngIf]="facet.field=='category'">
                            <div *ngIf="facet.field!='resourceType'" class="refineCategory uk-grid-margin">
                                <read-more [maxHeight]="235">
                                    <!--<span>{{facet.label}}</span>-->
                                    <div class="refineOption" *ngFor="let facetValue of facet.values">
                                        <input type="checkbox" name="vehicle" value="Bike" data-md-icheck
                                               (change)="this.onSelection($event, facet.field, facetValue.value)"
                                               [checked]="facetValue.isChecked">
                                        {{facetValue.value}}
                                        <span>({{facetValue.count}})</span>
                                    </div>
                                </read-more>
                            </div>
                        </ng-template>
                    </ng-template>

                </div>

                <div *ngIf="searchResults != null" class="uk-card uk-card-body uk-card-default sidemenu uk-panel-box-secondary refines uk-margin-top">

                    <h3 class="uk-h3 uk-heading-bullet">Further refine</h3>

                    <ng-template ngFor let-facet [ngForOf]="searchResults.facets">
                        <!--TODO remove when provider is removed from filters in the backend-->
                        <ng-template [ngIf]="facet.field!='category' && facet.field!='provider'">
                            <div *ngIf="facet.field!='resourceType'" class="refineCategory uk-grid-margin">
                                <read-more [maxHeight]="235">
                                    <span>{{facet.label=='TRL'?'Technology Readiness':facet.label}}</span>
                                    <div class="refineOption" *ngFor="let facetValue of facet.values">
                                        <input type="checkbox" name="vehicle" value="Bike" data-md-icheck
                                               (change)="this.onSelection($event, facet.field, facetValue.value)"
                                               [checked]="facetValue.isChecked">
                                        {{facet.label==="Provider"? this.providers[facetValue.value] : facetValue.value ? facetValue.value : "N/A"}}
                                        <span>({{facetValue.count}})</span>
                                    </div>
                                </read-more>
                            </div>
                        </ng-template>
                    </ng-template>

                </div>

            </aside>

            <div class="uk-width-expand@m uk-first-column">

                <div *ngIf="errorMessage" class="">
                    <div data-uk-alert="" class="uk-alert uk-alert-danger">
                        <p>{{errorMessage}}</p>
                    </div>
                </div>

                <div *ngIf="!errorMessage && searchResults != null" class="">

                    <div *ngIf="!foundResults">
                        <div data-uk-alert="" class="uk-alert uk-alert-warning">
                            <p>No results found</p>
                        </div>
                    </div>

                    <div *ngIf="searchResults.results != null && searchResults.results.length>0">

                        <div *ngIf="this.comparisonService.servicesToCompare && this.comparisonService.servicesToCompare.length>0" class="uk-width-1-1 uk-row-first uk-clearfix compareButton">
                            <div class="uk-float-right">
                                <a (click)="this.comparisonService.go()" class="uk-button uk-button-blue">
                                    <i class="fa fa-compress fa-flip-horizontal" aria-hidden="true"></i> | {{this.comparisonService.servicesToCompare.length}} for comparison
                                </a>
                            </div>
                        </div>

                        <div class="uk-width-1-1 uk-row-first uk-margin-medium-bottom">
                            <span>Showing {{searchResults.from+1}} - {{searchResults.to}} of {{searchResults.total}} results</span>
                        </div>

                        <div class="uk-width-1-1 uk-row-first">
                            <ul class="uk-pagination">

                                <li class="uk-disabled" *ngIf="isPreviousPageDisabled">
                                    <a class="uk-disabled" href="#">
                                        <span class="uk-margin-small-right" uk-pagination-previous></span> Previous
                                    </a>
                                </li>
                                <li *ngIf="!isPreviousPageDisabled">
                                    <a (click)="this.goToPreviousPage()">
                                        <span class="uk-margin-small-right" uk-pagination-previous></span> Previous
                                    </a>
                                </li>

                                <li class="uk-margin-auto-left uk-disabled" *ngIf="isNextPageDisabled">
                                    <a class="uk-disabled" href="#">Next
                                        <span class="uk-margin-small-left" uk-pagination-next></span>
                                    </a>
                                </li>
                                <li class="uk-margin-auto-left" *ngIf="!isNextPageDisabled">
                                    <a (click)="this.goToNextPage()">Next
                                        <span class="uk-margin-small-left" uk-pagination-next></span>
                                    </a>
                                </li>
                            </ul>
                            <div class="resultsPageLabel">page {{currentPage}} of {{totalPages}}</div>
                        </div>

                        <div class="uk-grid-margin">

                            <ng-template ngFor let-resourceInfo [ngForOf]="searchResults.results">

                                <div class="uk-grid" uk-grid="">
                                    <div class="uk-width-1-6@m uk-first-column">
                                        <div class="">
                                            <div class="uk-first-column actionIcons uk-inline-block" style="width: 20%">
                                                <div>
                                                    <a (click)="this.userService.addFavourite(resourceInfo.id)" title="Favorites" uk-tooltip="delay: 500">
                                                        <i class="fa fa-heart-o fa-lg" aria-hidden="true"></i>
                                                    </a>
                                                </div>
                                                <div class="uk-margin-small-top">
                                                    <a (click)="this.comparisonService.addOrRemove(resourceInfo.id)" title="Compare list" uk-tooltip="delay: 500">
                                                        <i [ngClass]="{'blueActionIcons': this.comparisonService.servicesToCompare.includes(resourceInfo.id)}"
                                                           class="fa fa-compress fa-flip-horizontal fa-lg" aria-hidden="true"></i>
                                                    </a>
                                                </div>
                                            </div>
                                            <div class="uk-inline-block uk-text-center uk-scrollspy-inview uk-animation-fade"
                                                 uk-scrollspy-class="" style="width: 75%">
                                                <div class="">
                                                    <a (click)="this.router.service(resourceInfo.id)">
                                                        <span>
                                                            <img src="{{resourceInfo.symbol || 'http://fvtelibrary.com/img/user/NoLogo.png'}}">
                                                        </span>
                                                    </a>
                                                </div>
                                                <div class="uk-margin-small-top">
                                                    <star-rating-comp (click)="this.userService.rateService(resourceInfo.id)" [starType]="'svg'" [rating]="0" [step]="1"
                                                                      [showHalfStars]="true" [readOnly]=!this.authenticationService.isLoggedIn() [size]="'small'"
                                                                      [staticColor]="'ok'" title="Rate this service" uk-tooltip="delay: 500"></star-rating-comp>
                                                    <span>(0)</span>
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                    <div class="uk-width-5-6@m">
                                        <h3 class="uk-margin-remove uk-text-left@m uk-text-center uk-h3 uk-scrollspy-inview uk-animation-fade" uk-scrollspy-class="" style="">
                                            <a (click)="this.router.service(resourceInfo.id)">
                                                {{resourceInfo.name}}
                                            </a>
                                        </h3>
                                        <div class="" style="text-transform: none" >
                                            <em style="color: #524f4f; display: flex">(by&nbsp;
                                                <span class="comma-element" *ngFor="let provider of resourceInfo.providers">
                                                    <a (click)="this.router.search({provider: provider})">{{[provider]|lookup:providers}}</a>
                                                </span>
                                                )
                                            </em>
                                        </div>
                                        <div class="uk-margin-small-top uk-scrollspy-inview uk-animation-fade serviceDescription" uk-scrollspy-class="" style="">
                                            <read-more-text [text]="resourceInfo.description" [maxHeight]="75">
                                            </read-more-text>
                                        </div>
                                        <div class="uk-margin-small-top uk-text-left@m uk-text-center uk-text-meta uk-scrollspy-inview
                                        uk-animation-fade serviceTagLine" uk-scrollspy-class="" style="">
                                            "{{resourceInfo.tagline}}"
                                        </div>
                                        <!--<div class="uk-margin uk-text-left@m uk-text-center uk-scrollspy-inview uk-animation-fade" uk-scrollspy-class="" style="">-->
                                            <!--<div class="uk-child-width-auto uk-grid-small uk-flex-left@m uk-flex-center uk-grid" uk-grid="">-->
                                                <!--<div class="uk-first-column">-->
                                                    <!--<a uk-icon="icon: twitter" href="https://twitter.com" class="el-link uk-link-muted uk-icon"><svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" ratio="1"><path d="M19,4.74 C18.339,5.029 17.626,5.229 16.881,5.32 C17.644,4.86 18.227,4.139 18.503,3.28 C17.79,3.7 17.001,4.009 16.159,4.17 C15.485,3.45 14.526,3 13.464,3 C11.423,3 9.771,4.66 9.771,6.7 C9.771,6.99 9.804,7.269 9.868,7.539 C6.795,7.38 4.076,5.919 2.254,3.679 C1.936,4.219 1.754,4.86 1.754,5.539 C1.754,6.82 2.405,7.95 3.397,8.61 C2.79,8.589 2.22,8.429 1.723,8.149 L1.723,8.189 C1.723,9.978 2.997,11.478 4.686,11.82 C4.376,11.899 4.049,11.939 3.713,11.939 C3.475,11.939 3.245,11.919 3.018,11.88 C3.49,13.349 4.852,14.419 6.469,14.449 C5.205,15.429 3.612,16.019 1.882,16.019 C1.583,16.019 1.29,16.009 1,15.969 C2.635,17.019 4.576,17.629 6.662,17.629 C13.454,17.629 17.17,12 17.17,7.129 C17.17,6.969 17.166,6.809 17.157,6.649 C17.879,6.129 18.504,5.478 19,4.74"/></svg></a>-->
                                                <!--</div>-->
                                                <!--<div>-->
                                                    <!--<a uk-icon="icon: facebook" href="https://facebook.com" class="el-link uk-link-muted uk-icon"><svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" ratio="1"><path d="M11,10h2.6l0.4-3H11V5.3c0-0.9,0.2-1.5,1.5-1.5H14V1.1c-0.3,0-1-0.1-2.1-0.1C9.6,1,8,2.4,8,5v2H5.5v3H8v8h3V10z"/></svg></a>-->
                                                <!--</div>-->
                                                <!--<div>-->
                                                    <!--<a uk-icon="icon: google-plus" href="https://plus.google.com" class="el-link uk-link-muted uk-icon"><svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" ratio="1"><path d="M12.9,9c0,2.7-0.6,5-3.2,6.3c-3.7,1.8-8.1,0.2-9.4-3.6C-1.1,7.6,1.9,3.3,6.1,3c1.7-0.1,3.2,0.3,4.6,1.3 c0.1,0.1,0.3,0.2,0.4,0.4c-0.5,0.5-1.2,1-1.7,1.6c-1-0.8-2.1-1.1-3.5-0.9C5,5.6,4.2,6,3.6,6.7c-1.3,1.3-1.5,3.4-0.5,5 c1,1.7,2.6,2.3,4.6,1.9c1.4-0.3,2.4-1.2,2.6-2.6H6.9V9H12.9z"/><polygon points="20,9 20,11 18,11 18,13 16,13 16,11 14,11 14,9 16,9 16,7 18,7 18,9 "/></svg></a>-->
                                                <!--</div>-->
                                            <!--</div>-->
                                        <!--</div>-->
                                    </div>
                                    <!--<div class="uk-width-1-6@m">-->
                                        <!--<div class="description">-->
                                            <!--&lt;!&ndash;<div>&ndash;&gt;-->
                                                <!--&lt;!&ndash;<strong>Last Updated: </strong><span> - </span>&ndash;&gt;-->
                                            <!--&lt;!&ndash;</div>&ndash;&gt;-->
                                            <!--&lt;!&ndash;<div>&ndash;&gt;-->
                                                <!--&lt;!&ndash;<strong>Accessed: </strong><span> - </span>&ndash;&gt;-->
                                            <!--&lt;!&ndash;</div>&ndash;&gt;-->
                                            <!--&lt;!&ndash;<div>&ndash;&gt;-->
                                                <!--&lt;!&ndash;<strong>Viewed: </strong><span> - </span>&ndash;&gt;-->
                                            <!--&lt;!&ndash;</div>&ndash;&gt;-->
                                            <!--&lt;!&ndash;<div>&ndash;&gt;-->
                                                <!--&lt;!&ndash;<strong>Favorited: </strong><span> - </span>&ndash;&gt;-->
                                            <!--&lt;!&ndash;</div>&ndash;&gt;-->
                                            <!--<div>-->
                                                <!--Last Updated: <span> - </span>-->
                                            <!--</div>-->
                                            <!--<div>-->
                                                <!--Accessed: <span> - </span>-->
                                            <!--</div>-->
                                            <!--<div>-->
                                                <!--Viewed: <span> - </span>-->
                                            <!--</div>-->
                                            <!--<div>-->
                                                <!--Favorited: <span> - </span>-->
                                            <!--</div>-->
                                        <!--</div>-->
                                    <!--</div>-->
                                <!--<div class="uk-width-1-2@l uk-width-1-1@m">-->
                                        <!--<h4 class="uk-text-left@m uk-text-center uk-h6 uk-scrollspy-inview uk-animation-fade" uk-scrollspy-class="" style="">-->
                                            <!--Traveled 18 times in 11 countries    </h4>-->
                                        <!--<div uk-scrollspy-class="" style="" class="uk-scrollspy-inview uk-animation-fade">-->
                                            <!--Vehicula hymenaeos tincidunt mattis, volutpat congue sed wisi, nec suspendisse donec risus nullam tellus quis. Commodi ante nec primis ut fusce, et justo, aliquam et felis tempor, arcu magna. Quam tristique iaculis, tellus rhoncus quis nonummy potenti felis, donec suscipit euismod donec mattis enim massa. Magna et odio suspendisse fusce in mauris.</div>-->
                                    <!--</div>-->
                                </div>

                                <hr uk-scrollspy-class="" style="" class="uk-scrollspy-inview uk-animation-slide-top-medium">

                            </ng-template>
                        </div>

                        <div class="uk-width-1-1 uk-row-first">
                            <ul class="uk-pagination">

                                <li class="uk-disabled" *ngIf="isPreviousPageDisabled">
                                    <a class="uk-disabled" href="#">
                                        <span class="uk-margin-small-right" uk-pagination-previous></span> Previous
                                    </a>
                                </li>
                                <li *ngIf="!isPreviousPageDisabled">
                                    <a (click)="this.goToPreviousPage()">
                                        <span class="uk-margin-small-right" uk-pagination-previous></span> Previous
                                    </a>
                                </li>

                                <li class="uk-margin-auto-left uk-disabled" *ngIf="isNextPageDisabled">
                                    <a class="uk-disabled" href="#">Next
                                        <span class="uk-margin-small-left" uk-pagination-next></span>
                                    </a>
                                </li>
                                <li class="uk-margin-auto-left" *ngIf="!isNextPageDisabled">
                                    <a (click)="this.goToNextPage()">Next
                                        <span class="uk-margin-small-left" uk-pagination-next></span>
                                    </a>
                                </li>
                            </ul>
                            <div class="resultsPageLabel">page {{currentPage}} of {{totalPages}}</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- RIGHT HELP CONTENT -->
            <aside-help-content #rightHelperContent [position]="'right'"
                                [ngClass]="rightHelperContent.isPresent()?'tm-sidebar uk-width-1-4@m uk-first-column':'clear-style'">
            </aside-help-content>

        </div>

        <!-- BOTTOM HELP CONTENT -->
        <help-content #bottomHelperContent [position]="'bottom'"
                      [ngClass]="bottomHelperContent.isPresent()?'uk-margin-medium-top uk-margin-medium-bottom':'clear-style'">
        </help-content>

    </div>
</div>

